<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Publish prototypes on the web - Cloud Platform User Guide</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/prototype-kit.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="user-guide.cloud-platform.service.justice.gov.uk" />
      <meta name="twitter:image" content="https://user-guide.cloud-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta name="twitter:title" content="Publish prototypes on the web - Cloud Platform User Guide" />
      <meta name="twitter:url" content="https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/prototype-kit.html" />

      <meta property="og:image" content="https://user-guide.cloud-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="Cloud Platform User Guide" />
      <meta property="og:title" content="Publish prototypes on the web" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/prototype-kit.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          Cloud Platform User Guide
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
      <nav>
        <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="mailto:platforms+user-guide@digital.justice.gov.uk?subject=User+guide+feedback">Feedback / Report a problem</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/">Documentation</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/cloud-platform-user-guide">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://user-guide.cloud-platform.service.justice.gov.uk"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="assertive" role="alert">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#publish-prototypes-on-the-web"><span>Publish prototypes on the web</span></a>
    <ul>
      <li>
        <a href="#before-you-start"><span>Before you start</span></a>
        <ul>
          <li>
            <a href="#assumptions"><span>Assumptions</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#1-copy-clone-the-environments-repository"><span>1. Copy (Clone) the environments repository</span></a>
      </li>
      <li>
        <a href="#2-create-your-prototype-kit-environment"><span>2. Create your prototype kit environment</span></a>
      </li>
      <li>
        <a href="#3-raise-a-pr"><span>3. Raise a PR</span></a>
      </li>
      <li>
        <a href="#4-create-your-prototype-kit-deployment-files"><span>4. Create your prototype kit deployment files</span></a>
      </li>
      <li>
        <a href="#5-push-these-files-to-github"><span>5. Push these files to github</span></a>
      </li>
      <li>
        <a href="#6-publish-prototype-kit-for-changes-on-a-specific-branch"><span>6. Publish prototype kit for changes on a specific branch</span></a>
      </li>
      <li>
        <a href="#branch-deployment-and-cleanup"><span>Branch deployment and cleanup</span></a>
      </li>
      <li>
        <a href="#deleting-your-published-prototype"><span>Deleting your published prototype</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              <h1 id="publish-prototypes-on-the-web">Publish prototypes on the web</h1><p>You can share prototypes made with the <a href="https://govuk-prototype-kit.herokuapp.com/docs">GOV.UK Prototype Kit</a> by publishing them on the web using an MoJ service called Cloud Platform.</p>
<p><strong>Note - This process can only be used to deploy prototypes based on the <a href="https://govuk-prototype-kit.herokuapp.com/docs">GOV.UK Prototype Kit</a>. This process will not work for any other types of apps e.g. Design History. If in any doubt please contact #ask-cloud-platform, or speak to your development team before you follow these instructions.</strong></p>
<h2 id="before-you-start">Before you start</h2><p>To publish a prototype you&rsquo;ll need to:</p>

<ul>
<li>be a member of at least one GitHub team in the <a href="https://github.com/orgs/ministryofjustice/teams">MoJ GitHub Organisation</a></li>
<li>have the <a href="/documentation/getting-started/cloud-platform-cli.html">Cloud Platform CLI</a> installed</li>
<li>have a local development environment including a terminal and a <a href="https://github.com/git-guides/install-git">git client</a>/<a href="https://docs.github.com/en/desktop">github desktop</a></li>
</ul>
<h3 id="assumptions">Assumptions</h3><p>We assume you will have:</p>

<ul>
<li>a github repository in the <a href="https://github.com/orgs/ministryofjustice/teams">MoJ GitHub Organisation</a>, with Gov.UK Prototype Kit code.</li>
<li>a latest prototype kit code build using Node.js.</li>
</ul>
<h2 id="1-copy-clone-the-environments-repository">1. Copy (Clone) the <code>environments</code> repository</h2><p>To create resources on the Cloud Platform, you need to raise a pull request
against the <a href="https://github.com/ministryofjustice/cloud-platform-environments">cloud-platform-environments</a> repository.</p>
<p>Create a copy of the <a href="https://github.com/ministryofjustice/cloud-platform-environments">cloud-platform-environments</a> repository:</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>git clone git@github.com:ministryofjustice/cloud-platform-environments.git
<span class="nv">$ </span><span class="nb">cd </span>cloud-platform-environments
</code></pre></div><h2 id="2-create-your-prototype-kit-environment">2. Create your prototype kit environment</h2><p>In the Cloud Platform CLI run:</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>cloud-platform environment prototype create
</code></pre></div><p>You&rsquo;ll be asked to name your prototype/namespace, which should be the name of your prototype github repository.</p>
<p>This name will be used as:</p>

<ul>
<li>the <a href="/documentation/getting-started/env-create.html">namespace</a> which will be created on the Cloud Platform</li>
<li>the github repository name, to push the secrets required to access Cloud Platform from your github repository</li>
<li>the domain name your prototype kit will be published to</li>
</ul>

<blockquote>
<p>You must ensure that the namespace name should be the same as your prototype github repository and there is not already a namespace.</p>
</blockquote>
<p>For example, if you choose <code>my-prototype</code> as the name, you will create:</p>

<ul>
<li>a namespace on the Cloud Platform called <code>my-prototype</code></li>
</ul>
<h2 id="3-raise-a-pr">3. Raise a PR</h2><p>After you have answered all the questions, the cloud-platform CLI will create
several files in a folder called:</p>
<div class="highlight"><pre class="highlight plaintext" tabindex="0"><code>namespaces/live.cloud-platform.service.justice.gov.uk/[name you chose]
</code></pre></div><p>Create a new branch and add/commit the new folder to Git:</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>git checkout <span class="nt">-b</span> my-prototype
<span class="nv">$ </span>git add <span class="nb">.</span>
<span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Added my-prototype prototype"</span>
</code></pre></div><p>Push this branch to GitHub:</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>git push origin my-prototype
</code></pre></div>
<blockquote>
<p>Note: Please replace <code>my-prototype</code> in the commands above with the name you chose.</p>
</blockquote>
<p>And then raise a pull request (PR) by following the instructions that
will appear on GitHub in the <a href="https://github.com/ministryofjustice/cloud-platform-environments">cloud-platform-environments</a>
repository.</p>
<p>Once a member of the Cloud Platform team has approved your PR, merge it.</p>
<p>When you merge the PR, the <a href="/documentation/other-topics/apply-pipeline.html">Apply Pipeline</a>
will create your namespace and push the credentials required to publish the kit as github secrets in your GitHub repository.</p>
<h2 id="4-create-your-prototype-kit-deployment-files">4. Create your prototype kit deployment files</h2><p>Create a copy of your prototype kit repository:</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>git clone git@github.com:ministryofjustice/&lt;your-prototype-repository&gt;.git
<span class="nv">$ </span><span class="nb">cd</span> &lt;your-prototype-repository&gt;
<span class="nv">$ </span>git checkout main 
<span class="nv">$ </span>cloud-platform prototype deploy create
</code></pre></div><p>This will create the files to build and deploy your prototype kit to the environment you created in step 2 and 3.</p>

<blockquote>
<p>The deployment files work only on the <strong>latest version</strong> of the prototype kit which we regularly update in the <a href="https://github.com/ministryofjustice/moj-prototype-template">moj-prototype-template</a>. Your deployment
may break if your prototype kit is not the latest version.</p>
</blockquote>
<p>Use the instructions to <a href="https://govuk-prototype-kit.herokuapp.com/docs/updating-the-kit">update your prototype kit</a> to latest version</p>
<h2 id="5-push-these-files-to-github">5. Push these files to github</h2><div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>git add <span class="nb">.</span>
<span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Add docker build and deployment files"</span>
<span class="nv">$ </span>git push origin main
</code></pre></div><p>If you dont have permissions to push directly to the main/default branch, create a branch and raise PR to have it approved and merge.</p>
<p>Create a new branch and add/commit the files to Git:</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$git</span> checkout <span class="nt">-b</span> my-branch
<span class="nv">$ </span>git add <span class="nb">.</span>
<span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Add docker build and deployment files"</span>
<span class="nv">$ </span>git push origin my-branch
</code></pre></div><p>Once these files are pushed to your github repository, the prototype kit will be deployed using the github action that is run by your repository.</p>
<p>Look under &ldquo;Actions&rdquo; tab on your github repository UI for the progress of the deployment.</p>
<p>Your prototype will be deployed in the below url:</p>
<div class="highlight"><pre class="highlight plaintext" tabindex="0"><code>https://&lt;your-prototype-repository&gt;-&lt;main&gt;.apps.live.cloud-platform.service.justice.gov.uk
</code></pre></div><h2 id="6-publish-prototype-kit-for-changes-on-a-specific-branch">6. Publish prototype kit for changes on a specific branch</h2><p>The github action file under <code>./github/workflows</code> and the continuos deployment filenames are generated based on the git branch you are in.</p>
<p>To generate the files for a specific branch, checkout to the branch and run the same command</p>
<p>For example, if you branch is called <code>tooling</code>,</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>git clone git@github.com:ministryofjustice/&lt;your-prototype-repository&gt;.git
<span class="nv">$ </span><span class="nb">cd</span> &lt;your-prototype-repository&gt;
<span class="nv">$ </span>git checkout tooling
<span class="nv">$ </span>cloud-platform prototype deploy create
</code></pre></div><p>The files generated for deploying in specific branch are as below:</p>
<div class="highlight"><pre class="highlight plaintext" tabindex="0"><code>./.github/workflows/cd-tooling.yaml
kubernetes-deploy-tooling.tpl
Dockerfile
.dockerignore
start.sh
</code></pre></div>
<blockquote>
<p>The docker build files <code>Dockerfile,.dockerignore, start.sh</code> work only on the <strong>latest version</strong> of the prototype kit which we regularly update in the <a href="https://github.com/ministryofjustice/moj-prototype-template">moj-prototype-template</a>. Your deployment
may break if your prototype kit is not the latest version.</p>
</blockquote>
<p>If you want to skip the docker build files when deploying to a branch, you can add a <code>--skip-docker-files</code> flag. For example:</p>
<div class="highlight"><pre class="highlight shell" tabindex="0"><code><span class="nv">$ </span>cloud-platform prototype deploy create <span class="nt">--skip-docker-files</span>
</code></pre></div><h2 id="branch-deployment-and-cleanup">Branch deployment and cleanup</h2><p>When you create the deployment files using <code>step 5</code> for a branch, they are generated to deploy on that specific branch. If the branch is merged to the 
main branch, these deployment files will get merged as well. You can do the cleanup by deleting the files specifically created for that branch.</p>
<h2 id="deleting-your-published-prototype">Deleting your published prototype</h2><p>When you no longer need your prototype to be published:</p>

<blockquote>
<p>Note - These steps are to decommission the hosting infrastructure that your prototype is running on. This will <strong>not</strong> delete your prototype source code.</p>
</blockquote>

<ol>
<li><p>raise a PR removing your namespace folder from the
<code>cloud-platform-environments</code> repository, and wait for it to be approved by a
member of the Cloud Platform team</p></li>
<li><p><strong>immediately before you merge the PR</strong> use the GitHub web interface to
delete your repository</p></li>
<li><p>merge the PR</p></li>
</ol>
<p>Your namespace will be removed from the Cloud Platform.</p>


              <div data-module='page-expiry' data-last-reviewed-on="2022-10-18">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 18 July 2022.

        It needs to be reviewed again on 18 October 2022
.
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 18 October 2022.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/cloud-platform-user-guide/blob/main/source/documentation/getting-started/prototype-kit.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/cloud-platform-user-guide/issues/new?labels=bug&amp;title=Re:%20'Publish%20prototypes%20on%20the%20web'&amp;body=Problem%20with%20'Publish%20prototypes%20on%20the%20web'%20(https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/prototype-kit.html)">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/cloud-platform-user-guide">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/application.js"></script>
  </body>
</html>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138188246-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138188246-1');
</script>

<script>
  // Add the current window.location to the body of the
  // feedback email message.
  function sendFeedback(mailto, event) {
    event.preventDefault();

    var body = "Feedback/Problem on page: " + window.location + "\n";
    var href = mailto + '&body=' + encodeURIComponent(body);

    window.location = href;
  }

  $(document).ready(function() {
    var feedbackLink = $('a[href^="mailto:"]:contains("Feedback")')[0];
    var mailto = feedbackLink.href;
    $(feedbackLink).on('click', function(event) { sendFeedback(mailto, event); });
  });
</script>
